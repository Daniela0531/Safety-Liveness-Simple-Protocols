# Safety-Liveness-Simple-Protocols
Завидонова Даниела Андреевна М05-411в  
Задание 1. Safety & Liveness. Simple Protocols

1. Для каждого из перечисленных утверждений укажите, является ли оно свойством безопасности (safety), или живости (liveness). Объясните при помощи математики, почему. safety - гарантия, что никогда не произойдёт что-то (плохое)/что-то произойдёт по конкретному правилу
   liveness - гарантия, что рано или поздно произойдёт что-то (хорошее), гарантия существования события на временной прямой 

   - Почтальон всегда звонит дважды. - safety, гарантия почтальон никогда не позвонит меньше или больше 2х раз  
   - Нет худа без добра. - liveness, гарантия, что если есть худо, рано или поздно будет и добро  
   - Кто ищет, тот всегда найдет. - liveness, гарантия, что рано или поздно найдёт  
   - Никто не ожидает испанской инквизиции. - safety, гарантия, что никто никогда не ожидает испанскую инквизицию  
   - Я тебя никогда не увижу && я тебя никогда не забуду. - safety, гарантия что этого никогда не произойдёт  
   - И все биндюжники вставали, когда в пивную он входил. - safety, гарантия, что биндюжники никогда не сидели, когда в пивную он входил  
   - Я закончу то, что ты начал. - liveness, гарантия, что рано или поздно я закончу твоё дело  
   - Прерывание приводит к генерации сообщения в течение одной секунды. - safety, гарантия, что в течении одной секунды после прерывания сообщение сгенерируется, правило. Никогда не будет ситуации, что оно генерировало дольше.  
   - Прерывание приводит к генерации сообщения. - liveness, гарантия, что рано или поздно сообщение сгенерируется  
   - Отсутствие дедлоков. - liveness, рано или поздно что-то произойдёт.


2. Придумайте по 2 примера условий живости и безопасности.

   safety:
   - Если человек совершит преступление, его посадят в тюрьму.
   - Если кусок льда положить в тёплое место, он будет таять. (Лёд гарантированное начнёт таить)
   
   liveness:
   - Если кусок льда положить в тёплое место, рано или поздно он растает. (Мы не знаем когда он растает, зависит от температуры и размеров льда, но он точно растает рано или поздно)
   - Рано или поздно дз будет сдано.


3. В решении проблемы Producer-Consumer мы подразумевали, что Боб видит состояние баночки на подоконнике Алис. Предложите протокол, использующий банки и нитки, который бы не требовал видимости банки на чужом подоконнике (так работают прерывания на самом деле). Покажите, что он корректен. 
   
   Решение:
   
   У каждого на окне стоит банка. К ней привязана нитка, за нитку может потянуть другой сосед, то есть Алиса может потянуть за нитку и сбить банку на окне Боба, для Боба аналогично. Иными словами каждый может послать сигнал второму, но не может получить ответ на этот сигнал.

   - Сообщение Боба - «Я положил еду и ушёл»
   - Сообщение Алисы - «Я забрала животных домой, они поели»
   Свою банку каждый из них сам никогда не роняет.

   У каждого персонажа есть всего 2 состояния:
   - его банка стоит на окне
   - его банка упала

   Каждый может находится во дворе (но не факт, что находится) только если его банка упала.
   Каждый гарантировано находится дома только если его банка стоит на окне.

   Протокол:
   
   Боб
   1. изначально банка Боба стоит на окне 
   2. его банка падает (Алиса дёрнула за нитку) - «Я забрала животных домой, они поели» 
   3. кладёт еду, уходит домой 
   4. ставит свою банку на окно 
   5. дёргает за нитку, роняет банку Алисы - «Я положил еду и ушёл»

   Алиса
   1. изначально банка Алисы стоит на окне 
   2. банка падает (Боб дёрнул за нитку) - «Я положил еду и ушёл» 
   3. выпускает животных, ждёт когда они поедят, возвращает их домой 
   4. ставит свою банку на окно 
   5. дёргает за нитку, роняет банку Боба - «Я забрала животных домой, они поели»

   Доказательство:

   Состояния, при которых каждый совершает то, или иное действие
   - 1 - банка поднята
   - 0 - упала

   Боб - слева, Алиса справа (то есть (0, 1) - банка опущена у Боба и стоит на окне у Алисы)

   Цикл состояний (из какого состояния в какое можно перейти):

   (1, 1) —(Алиса роняет банку Боба)—> (0, 1) —(Боб выходит, возвращается)—> (1, 1) —(Боб равняет банку Алисы)—> (1, 0) —(Алиса выходит, возвращается)—>(1, 1)


   Mutual Exclusion:
   Критическая секция - двор, куда кладут еду и где кормятся животные.
   Докажем корректность от противного:
   Допустим, Боб и Алиса оказались во дворе одновременно.
   Вариант 1: Боб вышел первым, и не успел уйти до того, как вышла Алиса.
   Если Боб во дворе, значит он в состоянии (0, 1). Если Алиса сейчас во дворе, значит она в состоянии (1, 0). Но она может попасть в это состояние только из состояния (1, 0), а было (0, 1). Противоречие 
   Аналогично для Вариант 2: Алиса вышла первой
   Вариант 3: вышли одновременно.
   Невозможно, так как Боб выходит только если состояние (0, 1), а Алиса - если (1, 0)

   Starvation-freedom:
   Так как мы исходим из предположения, что у Боба цель - положить корм, у Алисы - накормить зверей (а не что-то бесконечное), следовательно как только Боб положит корм, он освободит двор, поднимет свою банку и уронит банку Алисы. Аналогично с Алисой.
   (Если мы предполагаем, что Боб или Алиса могут находится во дворе сколько угодно - их целевое действие не конечно, тогда протокол нужно усложнять принудительным призывом уйти со двора.)
